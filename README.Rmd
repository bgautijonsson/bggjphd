---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# About this page

Information about this package and why it was created can be found at [my website](https://www.bggj.is/phd)

# Installing the package

The package can be installed with [pak](https://pak.r-lib.org/) or [remotes](https://remotes.r-lib.org/). I recommend using `pak`, since it can also install any non-R dependencies that might be required. I've started to move all my package installation to `pak`, and use it for example to set up my [Docker container](https://hub.docker.com/r/bgautijonsson/phdocker) that sets up an R environment along with any needed dependencies for `bggjphd`.

```{r devtools_bggjphd, eval = FALSE}
# using devtools
install.packages("remotes")
remotes::install_github("bgautijonsson/bggjphd")
```


```{r pak_bggjphd, eval = FALSE}
# using pak
install.packages("pak")
pak::pak("bgautijonsson/bggjphd")
```

# Data

The `bggjphd` package comes with some dataset

```{r}
library(bggjphd)
```

## precip

The `precip` dataset contains maximum hourly precipitation calculated yearly for each of the locations in the [UKCP Local Projections on a 5km grid over the UK for 1980-2080](https://catalogue.ceda.ac.uk/uuid/e304987739e04cdc960598fa5e4439d0) from the CEDA archive.

```{r}
skimr::skim(precip)
```

## stations

The `stations` dataset contains information about the stations at which the observations from `precip` are recorded.

```{r}
skimr::skim(stations)
```

## station_estimates

The `station_estimates` dataset contains parameter estimates and Hessian matrices from generalized maximum likelihood estimation of GEV models with trend at each of the locations. The results are stored in list-columns which need to be unnested for analysis. Inside the list columns the results are stored in long format.

```{r}
station_estimates |> 
  dplyr::select(par) |> 
  tidyr::unnest(par) |> 
  dplyr::group_by(name) |> 
  skimr::skim()
```
```{r}
station_estimates |> 
  dplyr::select(hess) |> 
  tidyr::unnest(hess) |> 
  dplyr::group_by(name1, name2) |> 
  skimr::skim()
```

## other data

There are other objects stored as data in `bggjphd`, but these are mostly kept there for use with the `ms_smooth()` function, and are binary versions of sparse `Matrix::` matrices.
